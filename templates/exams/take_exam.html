{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Take Exam: {{ exam.title }}</title>
    <link rel="stylesheet" href="{% static 'css/reset.css' %}">
    <link rel="stylesheet" href="{% static 'css/take-exam.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <div id="instructionsSection" class="instructions-section">
        <h2>Exam Instructions</h2>
        <ul>
            <li>Read all questions carefully.</li>
            <li>Once you start, the timer will begin.</li>
            <li>You cannot pause or restart the exam.</li>
            <li>Click "Start Exam" when you are ready.</li>
            {% if exam.instructions %}
            <li>{{ exam.instructions }}</li>
            {% endif %}
        </ul>
        <button id="startExamBtn" class="btn primary-btn">
            <i class="fas fa-play"></i> Start Exam
        </button>
    </div>
    <div class="exam-container" id="examContent" data-exam-id="{{ exam.id }}" style="display:none;">
        <div class="exam-header">
            <div>
                <h2>{{ exam.title }}</h2>
                <p>Subject: {{ exam.subject.name }}</p>
            </div>
            <div class="timer" id="timer" data-remaining="{{ remaining_time|default:"0" }}"></div>
        </div>
        <form id="exam-form" method="post">
            {% csrf_token %}
            <ol class="questions-list">
                {% for question in questions %}
                    <li class="question-container">
                        <div class="question-content">{{ question.text }}</div>
                        <div class="options-container">
                            {% if question.question_type == 'mcq' %}
                                <label class="option">
                                    <input type="radio" name="question_{{ question.id }}" value="a" required>
                                    {{ question.option_a }}
                                </label>
                                <label class="option">
                                    <input type="radio" name="question_{{ question.id }}" value="b">
                                    {{ question.option_b }}
                                </label>
                                <label class="option">
                                    <input type="radio" name="question_{{ question.id }}" value="c">
                                    {{ question.option_c }}
                                </label>
                                <label class="option">
                                    <input type="radio" name="question_{{ question.id }}" value="d">
                                    {{ question.option_d }}
                                </label>
                            {% else %}
                                <label class="option">
                                    <input type="radio" name="question_{{ question.id }}" value="t" required>
                                    True
                                </label>
                                <label class="option">
                                    <input type="radio" name="question_{{ question.id }}" value="f">
                                    False
                                </label>
                            {% endif %}
                        </div>
                    </li>
                {% empty %}
                    <li>No questions available for this exam.</li>
                {% endfor %}
            </ol>
            <button type="submit" class="submit-btn">Submit Exam</button>
        </form>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{% static 'js/take-exam.js' %}"></script>
</body>
</html>